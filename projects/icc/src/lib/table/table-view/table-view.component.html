<cdk-virtual-scroll-viewport
  iccVirtualScroll
  [rowHeight]="tableConfigs.rowHeight"
  [dataSourceLength]="dataSourceLength"
  [viewportBuffer]="viewportBuffer"
  (scroll)="onViewportScroll($event)"
  (scrolledIndexChange)="nextBatch()">
  <cdk-table
    [ngStyle]="{'width': tableWidth + 'px'}"
    [dataSource]="dataSource">
    <ng-container *ngFor="let column of visibleColumns; let colIndex = index" cdkColumnDef="{{ column.name }}"
      [sticky]="column.sticky" [stickyEnd]="column.stickyEnd">
      <cdk-cell class="icc-cdk-table-data-cell"
        *cdkCellDef="let record; let rowIndex = index"
        [attr.data-label]="column.title +': '"
        [ngStyle]="{'flex':'0 0 '+column.width+'px','left':column.left,'right':column.right,'display':column.hidden?'none':'flex'}">
        <div class="icc-cdk-table-column-cell">
          <span *ngIf="column.name!='rowSelection'">
            {{record[column.name]}}
          </span>
          <span *ngIf="column.name=='rowSelection'">
            <mat-checkbox
              (click)="checkboxClick($event)"
              (change)="checkboxChange($event, rowIndex, record, column)"
              [checked]="isRowSelected(record)">
            </mat-checkbox>
          </span>
        </div>
      </cdk-cell>
    </ng-container>

    <!--

        <div class="icc-grid-column-renderer-item">
          <span *ngIf="column.name!='rowSelection'" iccCellRenderer
            [rowHeight]="gridConfigs.rowHeight"
            [column]="column"
            [dataKeyId]="gridConfigs.dataKeyId"
            [field]="column.name"
            [value]=record[column.name]
            [record]="record"
            [rowIndex]="rowIndex"
            [colIndex]="colIndex"
            [dataSource]="dataSource">
          </span>
          <span *ngIf="column.name=='rowSelection'">
            <mat-checkbox
              (click)="checkboxClick($event)"
              (change)="checkboxChange($event, rowIndex, record, column)"
              [checked]="isRowSelected(record)">
            </mat-checkbox>
          </span>
        </div>
      icc-cdk-table-data-row icc-cdk-table-data-cell
            <cdk-header-cell *cdkHeaderCellDef [ngStyle]="{'flex': '1 ' + column.width + 'px'}"></cdk-header-cell>
    <cdk-header-row *cdkHeaderRowDef="displayedColumns" class="icc-grid-no-record-header"
      [ngStyle]="{'display': totalRecords > 0 ? 'none' : 'flex'}">
    </cdk-header-row>
    -->
    <cdk-row *cdkRowDef="let record; let rowIndex = index; columns: displayedColumns" class="icc-cdk-table-data-row">
    </cdk-row>
  </cdk-table>
</cdk-virtual-scroll-viewport>
